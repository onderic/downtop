paths:
  /auth/login:
    post:
      summary: Login a user
      description: Logs in a user and returns authentication tokens
      operationId: loginUser
      tags:
        - Auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginSchema'
      responses:
        '200':
          description: Successfully logged in
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponseSchema'
        '401':
          description: Invalid credentials

  /auth/logout:
    post:
      summary: Logout a user
      description: Logs out a user by removing their refresh token
      operationId: logoutUser
      tags:
        - Auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RefreshTokenDTOSchema'
      responses:
        '204':
          description: Successfully logged out

  /auth/refresh-token:
    post:
      summary: Refresh authentication tokens
      description: Refreshes the user's authentication tokens using the refresh token
      operationId: refreshToken
      tags:
        - Auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RefreshTokenDTOSchema'
      responses:
        '200':
          description: Successfully refreshed tokens
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JwtTokenSchema'

components:
  schemas:
    LoginSchema:
      type: object
      properties:
        phone:
          type: string
          description: The user's phone number
        password:
          type: string
          description: The user's password
      required:
        - phone
        - password

    JwtTokenSchema:
      type: object
      properties:
        accessToken:
          type: string
        refreshToken:
          type: string

    AuthResponseSchema:
      type: object
      properties:
        user:
          $ref: '#/components/schemas/SafeUser'
        tokens:
          $ref: '#/components/schemas/JwtTokenSchema'

    RefreshTokenDTOSchema:
      type: object
      properties:
        refreshToken:
          type: string
      required:
        - refreshToken
